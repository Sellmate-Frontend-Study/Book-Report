## CHAPTER 02 리팩터링: 리팩터링 원칙

## 📚 읽은 내용

### 읽은 부분
- 2.1 리팩터링 정의
- 2.2 두 개의 모자
- 2.3 리팩터링하는 이유
- 2.4 언제 리팩터링해야 할까?
- 2.5 리팩터링 시 고려할 문제
- 2.6 리팩터링, 아키텍처, 애그니(YAGNY)
- 2.7 리팩터링과 소프트웨어 개발 프로세스
- 2.8 리팩터링과 성능
- 2.9 리팩터링의 유래
- 2.10 리팩터링 자동화

### 메모

#### 개발시 리팩터링 적용 단계
- 두 개의 모자
  - 기능추가
    - 기존 로직과의 완전한 분리 (최대한 분리)
    - 테스트 진행
  - 리팩터링
    - 최대한 코드 재구성에만 전념
    - 테스트 추가는 누락분 발견시에만
    - 기존 로직 변경은 인터페이스 변경시에만

#### 리팩토링의 장점
- 코드의 목적과 의도를 명확하게 드러내어 차후 해당 로직 이해에 용이
- 점진적으로 유지보수 및 개발 시간 시간 단축 가능

#### 리팩토링 시점
- 내부 동작 이해가 필요한 경우 리팩토링을 통해 구조를 정리함으로서 설계 자체를 이해 가능
- 기능 추가를 진행할때도 관련 부분을 리팩토링 하는 것으로서 기능 추가를 좀 더 쉽게 가능 (같은 로직이 여러곳에서 반복되는 경우 묶어둔다거나..)
- 지나가다가 발견한 비효율적인 코드에 대한 리팩토링은 그때그때 짧게라도 진행해두거나 최소한 주석이라도 달아두는 것이 좋다.
- 가능한 기회가 될 때마다 리팩토링을 진행하고, 리팩토링을 위해 별도의 시간을 투자하는 것은 최대한 지양.
- 대규모 리팩토링을 진행할 경우에도 팀 전체가 리팩토링에 참여하는것보다 테스트를 통해 안정성을 확보하고, 팀원 각자가 관련 부분을 작업할 때 리팩토링을 진행하는 방식 권장
- 코드 리뷰시에도 리팩토링을 활용하면 타인의 시선으로 코드를 바라봄으로서 내 코드가 객관적으로 이해하기 쉬운지, 더 개선의 여지가 있는지 등을 알 수 있음
- 개발을 모르는 관리자에게 리팩터링에 대해 설명을 해야하는 상황이라면, 개발 후 리팩터링이 아닌 리팩터링 후 개발 진행이 더 일정을 빠르게 처리할 가능성이 있음
- 굳이 당장 수정할 필요가 없는 코드라면 리팩토링 또한 굳이 진행할 필요가 없음, 내부 동작을 이해해야만 하는 시점에서 리팩토링을 진행하고, 이를 통해 설계를 이해하는게 더욱 건설적

#### 리팩토링시 고려사항
- 리팩토링은 오직 경제적인 효과를 위해서만 진행. 즉, 리팩토링을 진행함으로서 차후 유지보수 및 개발 시간을 단축할 수 있어야함.
- 팀에서 소유한 코드는 각 팀원이 수정할 수 있어야 한다. 그렇지 않으면 일부 코드만 리팩토링 되고 같은 로직이 다른 곳에서는 여전히 레거시 코드로 남아있는 상황이 발생할 여지가 있음.
- CI 환경이 중요. 가능한 짧은 단위로 메인 브랜치와의 통합이 필요. 따라서 이를 위해 기능 개발시 통합되더라도 문제가 없도록 고려하며 머지하는 것이 필요.
- 테스트가 없는 상황에서의 리팩토링은 위험성을 동반한다
- 레거시 코드를 이어받은 경우 가능한 테스트부터 진행 => '레거시 코드 활용 전략' 책 참고
- 애그니(YAGNI) : You Aren't Gonna Need It
  - 고객사들 요구사항은 언제나 변화무쌍. 초기 설계에서 달라지는 경우가 허다.
  - 초기 설계 단계부터 빡세게 고정적으로 만들어두지 말고, 간결하고 점진적으로 수정될 수 있는 여지를 남긴 채 설계 필요.
  - 차후 리팩토링시 **함수 매개변수화하기 방법** 권장


### 📚 느낀점
- 리팩토링의 목적은 오직 경제적인 효율성에만 존재한다는 점을 명시
- 리팩토링은 기존 코드에 영향을 주면 안되는 작업인 만큼 선행 테스트가 필수
- 기존 동작에 대한 이해가 필요한 시점에 리팩토링을 진행하면 구조 설계가 좀 더 명확해지는게 가능
- 기능 개발과 리팩토링은 완전히 별개의 건. 최대한 구분하여 진행 필요

- jest 관련하여 **레거시 코드 활용 전략** 이라는 책을 개인적으로 추천받은 바가 있음. 차후 읽어볼 예정
- **리팩토링 HTML**은 개인적으로 관심이 가는 편 여유가 된다면 한번 읽어보고 싶음

### 📚 공유하고 싶은 부분 (사이트)
